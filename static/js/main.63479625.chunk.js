(this["webpackJsonpreactnd-myreads"]=this["webpackJsonpreactnd-myreads"]||[]).push([[0],{16:function(e,t,a){e.exports=a(30)},24:function(e,t,a){},25:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(14),c=a.n(r),l=a(4),s=(a(24),a(6)),i=a(1),u=a(12),d="https://reactnd-books-api.udacity.com",m=localStorage.token;m||(m=localStorage.token=Math.random().toString(36).substr(-8));var h={Accept:"application/json",Authorization:m},k=(a(25),function(e){var t=e.book,a=e.onUpdateBook;return o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:t.shelf||"none",onChange:function(e){a(t,e.target.value.toString())}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None")))}),f=function(e){var t=e.book,a=e.onUpdateBook;return o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks&&t.imageLinks.thumbnail||"",")")}}),o.a.createElement(k,{book:t,onUpdateBook:a})),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.authors&&t.authors.join(", ")))},b=function(e){var t=e.books,a=e.onUpdateBook;return o.a.createElement("ol",{className:"books-grid"},t.map((function(e){return o.a.createElement("li",{key:e.id},o.a.createElement(f,{book:e,onUpdateBook:a}))})))},p=function(e){var t=e.id,a=e.title,n=e.books,r=e.onUpdateBook;return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},a),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement(b,{books:n.filter((function(e){return e.shelf===t})),onUpdateBook:r})))},E=[{id:"currentlyReading",name:"Currently Reading"},{id:"wantToRead",name:"Want to Read"},{id:"read",name:"Read"}],v=function(e){var t=e.books,a=e.onUpdateBook;return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement("div",null,E.map((function(e){return o.a.createElement(p,{key:e.id,id:e.id,title:e.name,books:t,onUpdateBook:a})})))),o.a.createElement("div",{className:"open-search"},o.a.createElement(l.b,{className:"button",to:"/search"},"Add a book")))},N=function(e){var t=e.availableBooks,a=e.onUpdateBook,n=o.a.useState([]),r=Object(s.a)(n,2),c=r[0],i=r[1],m=function(e){var t=e.trim();t.length<=2?i([]):function(e){return fetch("".concat(d,"/search"),{method:"POST",headers:Object(u.a)({},h,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(t).then((function(e){Array.isArray(e)?k(e):i([])}))},k=function(e){var a=e.map((function(e){var a=t.find((function(t){return t.id===e.id}));return a&&(e.shelf=a.shelf),e}));i(a)};return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(l.b,{to:"/",className:"close-search"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(e){return m(e.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement(b,{books:c,onUpdateBook:a})))},g=function(){var e=o.a.useState([]),t=Object(s.a)(e,2),a=t[0],n=t[1];o.a.useEffect((function(){fetch("".concat(d,"/books"),{headers:h}).then((function(e){return e.json()})).then((function(e){return e.books})).then((function(e){n(e)}))}),[]);var r=function(e,t){(function(e,t){return fetch("".concat(d,"/books/").concat(e.id),{method:"PUT",headers:Object(u.a)({},h,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))})(e,t).then((function(){e.shelf=t,n(a.filter((function(t){return t.id!==e.id})).concat([e]))}))};return o.a.createElement("div",{className:"app"},o.a.createElement(i.a,{exact:!0,path:"/",render:function(){return o.a.createElement(v,{books:a,onUpdateBook:r})}}),o.a.createElement(i.a,{path:"/search",render:function(){return o.a.createElement(N,{availableBooks:a,onUpdateBook:r})}}))};c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(l.a,null,o.a.createElement(g,null))),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.63479625.chunk.js.map